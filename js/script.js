$(document).ready(function(){function n(){$(".qtip").hide();setTimeout(function(){$(".qtip").hide()},100)}function i(n,t){var i=n.text();t.qtip({content:i,position:{my:"bottom center",at:"top center"},style:{classes:"qtip-red qtip-rounded"},hide:{event:!1},show:!0})}$("#slider-photo-pager").smoothDivScroll({autoScrollingMode:"onStart"});$("#slider-photo ul").bxSlider({auto:!0,mode:"fade",pagerCustom:"#slider-photo-pager .scrollableArea",controls:!1});$.ajaxSetup({cache:!1});$("[href='#modal-city']").click(function(){$("#modal-city .container").load("city.php .container >*")});$("body").on("click",".list-cities a, .other-city",function(){var n=$(this).text();$("#city-selected .city").text(n);$("form .city").val(n);$.fancybox.close()});$("#slider-presentation").bxSlider({pager:!1,mode:"fade",controls:!1,auto:!0,speed:800});$("#video-play").click(function(){return $(this).find(".video").show(),$(this).find("a").hide(),!1});$("#nav-main").ddscrollSpy({scrolltopoffset:-53});$(".scroll-animate").each(function(){var n=$(this);$(window).scroll(function(){var t=n.offset().top,r=n.height()+t,i;t=t-$(window).height();i=$(this).scrollTop();i>t&&i<r&&(n.hasClass("animate")||(n.addClass("animate"),n.trigger("animateIn")))});$(".scroll-animate, .anim-elem, .ships, .how, .engines, .support").on("animateIn",function(){var n=0;$(this).find(".anim").each(function(){var t=$(this);setTimeout(function(){t.css("opacity",1);t.css("transform","scale(1.0, 1.0)")},n*100);n++})}).on("animateOut",function(){$(this).find(".anim").each(function(){$(this).css("opacity",.01);$(this).css("transform","scale(0.5, 0.5)")})})});$(".popup").fancybox({padding:0});$(".fancybox").fancybox({padding:0});$.extend($.fancybox.defaults,{beforeClose:function(){n()}});var t="placeholder"in document.createElement("input");t||($.fn.placeholder=function(){$(this).each(function(){var t=$(this).height()+"px",n;$(this).is("textarea")||$(this).css("line-height",t);n=$(this).attr("placeholder");$(this).val(n);$(this).click(function(){var n=$(this).attr("placeholder");$(this).val()==n&&$(this).val("")});$(this).blur(function(){var n=$(this).attr("placeholder");$(this).val()==""&&$(this).val(n)})});$("form").submit(function(){$this=$(this);$(this).find("[placeholder]").each(function(){var n=$(this).attr("placeholder");$(this).val()==n&&$(this).val("")});setTimeout(function(){$this.find("[placeholder]").each(function(){var n=$(this).attr("placeholder");$(this).val()==""&&$(this).val(n)})},1e3)})},$("[placeholder]").placeholder());$(".ie8 label.btn").click(function(){return $(this).closest("form").submit(),0});$("form").each(function(){$(this).validate({errorClass:"error",rules:{phone:{required:!0,digits:!0,maxlength:20},email:{required:!0},name:{required:!0}},errorPlacement:function(n,t){setTimeout(function(){$(t).hasClass("valid")?setTimeout(function(){$(t).qtip("destroy")},1):i(n,t)},1)},success:function(){},submitHandler:function(n){var t=$(n),i=t.attr("action"),r=t.serialize(),u=t.attr("data-goal");return n.reset(),$.fancybox.showLoading(),$.post(i,r,null,"json").done(function(n){$.fancybox.hideLoading();$.fancybox.close();$.fancybox({href:"#modal-"+n.status,padding:0});n.status==="success"&&window.dataLayer&&window.dataLayer.push({event:"reachGoal",goal:u})}).fail(function(){alert("Произошла ошибка при отправке данных на сервер.")}),!1}})})}),function(n){n.extend(n.validator.messages,{required:"Заполните поле",remote:"Пожалуйста, введите правильное значение.",email:"Пожалуйста, введите корректный адрес электронной почты.",url:"Пожалуйста, введите корректный URL.",date:"Пожалуйста, введите корректную дату.",dateISO:"Пожалуйста, введите корректную дату в формате ISO.",number:"Пожалуйста, введите число.",digits:"Пожалуйста, вводите только цифры.",creditcard:"Пожалуйста, введите правильный номер кредитной карты.",equalTo:"Пожалуйста, введите такое же значение ещё раз.",accept:"Пожалуйста, выберите файл с правильным расширением.",maxlength:n.validator.format("Пожалуйста, введите не больше {0} символов."),minlength:n.validator.format("Пожалуйста, введите не меньше {0} символов."),rangelength:n.validator.format("Пожалуйста, введите значение длиной от {0} до {1} символов."),range:n.validator.format("Пожалуйста, введите число от {0} до {1}."),max:n.validator.format("Пожалуйста, введите число, меньшее или равное {0}."),min:n.validator.format("Пожалуйста, введите число, большее или равное {0}.")})}(jQuery)